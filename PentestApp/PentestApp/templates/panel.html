<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Admin panel</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/screen_scope.css', v=1) }}" type="text/css">
	<link rel="stylesheet" href="{{ url_for('static', filename='css/panel.css', v=1) }}" type="text/css">
</head>
<body>
    {% include 'header.html' %}
    <div class="admin_main">
        <div class="table">
            <p>User info:</p>
            <table border="1" cellpadding="10">
                <tr>
                    <th>Username</th>
                    <th>Password</th>
                    <th>Money</th>
                </tr>
                {% for user in users %}
                    <tr><th>{{ user[1] }}</th> <th>{{ user[2] }}</th> <th>{{ user[3] }}</th></tr>
                {% endfor %}
            </table>
        </div>
        <div class="manage">
            <p>Manage database:</p>
            <form method="post" action="/refill_db" class="transfer_form">
                <input class="send_button" type="submit" value="Refill database">
            </form>
            <form method="post" action="/clear_db" class="transfer_form">
                <input class="send_button" type="submit" value="Clear database">
            </form>
            <div class="transfer_changes">
                {% if manage_changes|length != 0 %}
                    {% for change in manage_changes %}
                        <p>{{ change }}</p>
                    {% endfor %}
                {% endif %}
            </div>
        </div>
        <div>
            <p>Transfer money:</p>
            <p>(disabled for the duration of the ctf)</p>
            <form method="post" action="/admin_transfer" class="transfer_form">
                <input class="username_receiver" type="text" name="username_receiver" placeholder="receiver username">
                <input class="amount" type="number" name="amount" placeholder="amount">
                <br>
                <input disabled class="send_button" type="submit" value="Send → ">
                <!-- <input class="send_button" type="submit" value="Send → "> -->
            </form>
            <div class="transfer_changes">
                {% if changes|length != 0 %}
                    {% for change in changes %}
                        <p>{{ change }}</p>
                    {% endfor %}
                {% endif %}
            </div>
        </div>
        <div>
            <p>Defense level:</p>
            <form method="POST" action="/defense_level" class="defense_form">
                <table border="1" cellpadding="10">
                    <tr>
                        <th>Vuln</th>
                        <th>Switch</th>
                    </tr>
                    <tr>
                        <th>Block vuln on login:</th>
                        <th><input {% if defense['level_login']==1 %}checked{% endif %} type="checkbox" level_loginclass="level_defense" name="level_login" value="1"></th> 
                    </tr>
                    <tr>
                        <th>Block vuln on wallet:</th>
                        <th><input {% if defense['level_money']==1 %}checked{% endif %} type="checkbox" class="level_defense" name="level_money" value="1"></th> 
                    </tr>
                    <tr>
                        <th>Block vuln on file:</th>
                        <th><input {% if defense['level_file']==1 %}checked{% endif %} type="checkbox" class="level_defense" name="level_file" value="1"></th> 
                    </tr>
                </table>
                <input class="save_button" type="submit" value="Save">
            </form>
        </div>
    </div>
    <div class="logs">
        <p>Logs:</p>
        <div class="log_main">
            {% for change in logs %}
                <p>{{ change }}</p>
            {% endfor %}
        </div>
        <form method="POST" action="/get_logs_refresh" type="submit" class="form_log">
            <input class="save_button" type="submit" value="Refresh">
        </form>
    </div>

</body>
</html>